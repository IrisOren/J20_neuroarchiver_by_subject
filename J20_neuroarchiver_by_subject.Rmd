---
title: "J20 by subject analysis"
author: "Iris Oren"
date: "14/06/2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r initialisation, include=FALSE}
AnimalIDCurrent<-"JF110"
DataFile<-"~/Dropbox/ANALYSIS/J20_EEG_Manuscript/Output/SCPPDataframeAll.csv"

#Load packages
library(lubridate)
library(dplyr)
library(lazyeval) #Needed for using ggplot2 library
library(ggplot2)
library(grid)

#Import data and filter for animal
Dataframe<-read.csv(DataFile)
Dataframe<-filter(Dataframe, AnimalIDVariable==AnimalIDCurrent)
```

#`r AnimalIDCurrent`

###Dataloss over time
```{r DatalossOverTime, include=TRUE}
DataLossOverTime<-ggplot(Dataframe, aes(x=strptime(TimeOfDay, format = "%Y-%m-%d %H:%M:%S"), y=Loss)) + xlab("Date") + ylab("Loss")
DataLossOverTime<-DataLossOverTime + geom_point() +
  geom_hline(yintercept = 20)
DataLossOverTime
```
###Filter out loss intervals
This accounts for when transmitter was switched off
```{r FilterOutLoss, include = TRUE}
Dataframe<-filter(Dataframe, Loss<90)
```

###Spike count over time

```{r SpikeCountOverTimeControl, include=TRUE}
SpikeCountOverTime<-ggplot(Dataframe, aes(x=strptime(TimeOfDay, format = "%Y-%m-%d %H:%M:%S"), y=SpikeCount, colour=Treatment)) + xlab("Date") + ylab("Spikes/8s")
SpikeCountOverTime<-SpikeCountOverTime + geom_point()
SpikeCountOverTime
```
